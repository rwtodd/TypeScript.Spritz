<html>
<head>
<title>Test of SpritzJS</title>
<script type="text/javascript" src="js/spritzlib.js"></script>
<script>
	function doHash() {
		var toHash = document.getElementById("src").value;
		var szHash = parseInt(document.getElementById("hsz").value, 10);
		var target = new Uint8Array(szHash);
		Spritz.Hash.ofString(target, toHash);
		document.getElementById("tgt").innerText = Spritz.Util.b64Array(target);
	}
	function doDecr() {
		var knowntext = Uint8Array.of(0xb4,0x1b,0x74,0xe5,0xe9,0x4d,0xb0,0x20,0x98,0x9d,0x25,0x92,0xef,0xac,0x6c,0x50, 
			0x45,0x17,0xb7,0xa7,0xcd,0x92,0x80,0x8e,0x73,0x10,0xfd,0x0b,0x46,0xd1,0x35,0xd0,
			0x68,0x01,0x7b,0xae,0xc3,0xf1,0x35,0x87,0x13,0x24,0x30,0xe3,0x47,0x8f,0xec,0x44,
			0x96,0xa1,0x4d,0xba,0x62,0x53,0xe1,0x80,0x94,0x78,0xeb,0x05,0x41,0xae,0xb8,0xc6,
			0xec,0x54,0xac,0x03,0x1e,0x0d,0x99,0x2a,0x59,0xd9,0x53,0x38,0x43,0x93,0x46,0x17,
			0x04,0xdd,0xc2,0xab,0x26,0x63,0xbb,0x83,0xc3,0xd7,0xa4,0x1e,0x45,0x91,0x11,0xb1,
			0x57,0x73,0x6d,0xfe,0xda,0xae,0xfb,0x5d,0x1d,0xf3,0x5f,0xab,0xb5,0x72,0x1a,0x28,
			0x01);
		try {
		   var [ofn, payl] = Spritz.Crypt.decrypt("ABC123", knowntext);
		   document.getElementById("ofilename").innerText = ofn;
		   document.getElementById("otext").innerText = Spritz.Util.decodeUTF8(payl);
		} catch(err) {
			document.getElementById("otext").innerText = err;
		}
	}
</script>	
</head>
<body>
<h1>Hash Something</h1>
<label>Input:</label><input id="src" value="ABC"><br>
<label>Size:</label><input id="hsz" value="32"><br>
<span id="tgt">...</span>
<button onclick="doHash()">HASH</button>
<hr>
<h1>Decrypt known file</h1>
<span id="ofilename">...</span>
<p id="otext">...</p>
<button onclick="doDecr()">DECRYPT</button>
</body>
</html>

